<!-- Navigation Menu which is in left side -->
<ul class="navigation-menu">
    <li routerLink="/VisitingCard" class="navigation-menu-item backto">
        <i class="mr-3 fas fa-arrow-left"></i>Back to List
    </li>
    <li class="navigation-menu-item"><i class="mr-3 fas fa-font"></i>Text</li>
    <li class="navigation-menu-item"><i class="mr-3 fas fa-image"></i>Image</li>
    <li class="navigation-menu-item"><i class="mr-3 fas fa-shapes"></i>Shape</li>
    <li class="navigation-menu-item"><i class="mr-3 fas fa-vector-square"></i>Line</li>
</ul>
<!-- End Left Navigation menu -->

<!-- Element Editor tab -->
<form class="form-inline editor-tab" *ngIf="showEditorTab">
    <!-- Font Family Selector -->
    <div class="mr-2" style="height:70%">
        <ng-select [style.width.px]="150" [(ngModel)]="selectedFont" (change)="setFontFamily()"
            [ngModelOptions]="{standalone: true}" placeholder="Font Style">
            <ng-option *ngFor="let font of fonts" [value]="font.id"><span
                    [style.fontFamily]="font.name">{{font.display}}</span></ng-option>
        </ng-select>
    </div>
    <!-- Font Size selector, Increment, Decrement -->
    <div class="btn-group mr-2 input-group-sm" style="height:70%">
        <button class="btn btn-light editor-btn mr-1" (click)="setFontSize(-1)"><i class="fas fa-minus"></i></button>
        <input [style.width.px]="80" style="height:100%;" [(ngModel)]="selectedSize"
            [ngModelOptions]="{standalone: true}" (input)="setFontSize(0)" class="form-control">
        <button class="btn btn-light editor-btn ml-1" (click)="setFontSize(1)"><i class="fas fa-plus"></i></button>
    </div>
    <!-- Font color and styles -->
    <div class="btn-group mr-2" style="height:70%">
        <button class="btn editor-btn" [(colorPicker)]="selectedFontColor!" [cpPosition]="'bottom'" (colorPickerChange)="setFontColor()">
            <i [style.borderBottom]="'5px solid'" [style.borderColor]="selectedFontColor"
                class="fas fa-font"></i></button>
        <button class="btn fw-bolder" [ngClass]="isFontBold?'btn-selected':'editor-btn'" (click)="setFontBold()">
            <i class="fas fa-bold"></i></button>
        <button class="btn fst-italic" [ngClass]="isFontItalic?'btn-selected':'editor-btn'" (click)="setFontItalic()">
            <i class="fas fa-italic"></i></button>
        <button class="btn text-decoration-underline" [ngClass]="isFontUnderline?'btn-selected':'editor-btn'"
            (click)="setFontUnderline()">
            <i class="fas fa-underline"></i></button>
    </div>
</form>
<!-- End Editor tab -->


<!-- Container containing Main Editor -->
<div class="container" (click)="closeContextMenu()">
    <div class="row justify-content-center">
        <div class="col-lg-12">
            <div class="custom-tab-content flex-column flex-md-row">
                <ul ngbNav #nav="ngbNav" class="nav navbar-light nav-pills justify-content-center">

                    <!--  Front Side of Visitng Card -->
                    <li ngbNavItem class="nav-item" (click)="selectFrontSide()">
                        <a ngbNavLink>Front Side</a>
                        <ng-template ngbNavContent>
                            <div class="front-side">
                                <div class="editor" id="f-image-section" [style.height.px]="itemHeight"
                                    [style.width.px]="itemWidth" (mouseup)="detectRightClick($event,'','')">
                                    <div class="position-relative">
                                        <ng-container *ngFor="let content of cardFrontContent">
                                            <!-- For Svg -->
                                            <div *ngIf="content.type==1" id="{{content.id}}"
                                                (click)="selectElement('f',content.id)" class="position-absolute"
                                                (mouseup)="detectRightClick($event,'f',content.id)"
                                                [style.marginLeft.px]="content.left" [style.marginTop.px]="content.top"
                                                [style.width.px]="content.width"
                                                [ngClass]="selectedElementId==content.id?'bordering':''"
                                                [style.height.px]="content.height">
                                                <svg [attr.fill]="content.svgFillColor"
                                                    [attr.viewBox]="content.svgViewBox">
                                                    <path [attr.d]="content.svgPath" />
                                                </svg>
                                            </div>
                                            <!-- For Image -->
                                            <img *ngIf="content.type==2" id="{{content.id}}"
                                                (click)="selectElement('f',content.id)" class="position-absolute"
                                                (mouseup)="detectRightClick($event,'f',content.id)"
                                                [style.marginLeft.px]="content.left" [style.marginTop.px]="content.top"
                                                [style.width.px]="content.width"
                                                [ngClass]="selectedElementId==content.id?'bordering':''"
                                                [style.height.px]="content.height" src="./assets/{{content.src}}" />
                                            <!-- For Text -->
                                            <p *ngIf="content.type==3" id="{{content.id}}"
                                                (click)="selectElement('f',content.id)" class="position-absolute"
                                                (mouseup)="detectRightClick($event,'f',content.id)"
                                                [ngClass]="selectedElementId==content.id?'bordering':''"
                                                [style.marginLeft.px]="content.left" [style.marginTop.px]="content.top"
                                                [style.fontSize.px]="content.fontSize"
                                                [style.fontWeight]="content.bold?'bold':'normal'"
                                                [style.fontStyle]="content.italic?'italic':'normal'"
                                                [style.textDecoration]="content.underline?'underline':'none'"
                                                [style.fontFamily]="content.fontFamily?fonts[content.fontFamily-1]:''"
                                                [style.color]="content.fontColor">
                                                {{content.text}}
                                            </p>
                                        </ng-container>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between" [style.width.px]="itemWidth">
                                    <button class="btn btn-primary mt-3" (click)="downloadJpg('f')"
                                        [style.width.px]="itemWidth/2-5"><i class="fas fa-download mr-4"></i>Download
                                        JPEG</button>
                                    <button class="btn btn-danger mt-3" (click)="downloadSvg('f')"
                                        [style.width.px]="itemWidth/2-5"><i class="fas fa-download  mr-4"></i>Download
                                        SVG</button>
                                </div>
                            </div>
                        </ng-template>
                    </li>
                    <!--  End Front side of Visiting Card -->

                    <!-- Back Side of Visiting Card -->
                    <li ngbNavItem class="nav-item" (click)="selectBackSide()">
                        <a ngbNavLink>Back Side</a>
                        <ng-template ngbNavContent>
                            <div class="back-side">
                                <div class="editor" id="b-image-section" [style.height.px]="itemHeight"
                                    [style.height.px]="itemHeight" [style.width.px]="itemWidth"
                                    (mouseup)="detectRightClick($event,'','')">
                                    <div class="position-relative">
                                        <ng-container *ngFor="let content of cardBackContent">
                                            <div *ngIf="content.type==1" id="{{content.id}}"
                                                (click)="selectElement('b',content.id)" class="position-absolute"
                                                (mouseup)="detectRightClick($event,'b',content.id)"
                                                [ngClass]="selectedElementId==content.id?'bordering':''"
                                                [style.marginLeft.px]="content.left" [style.marginTop.px]="content.top"
                                                [style.width.px]="content.width" [style.height.px]="content.height">
                                                <svg [attr.fill]="content.svgFillColor"
                                                    [attr.viewBox]="content.svgViewBox">
                                                    <path [attr.d]="content.svgPath" />
                                                </svg>
                                            </div>
                                            <img *ngIf="content.type==2" id="{{content.id}}"
                                                (click)="selectElement('b',content.id)" class="position-absolute"
                                                (mouseup)="detectRightClick($event,'b',content.id)"
                                                [ngClass]="selectedElementId==content.id?'bordering':''"
                                                [style.marginLeft.px]="content.left" [style.marginTop.px]="content.top"
                                                [style.width.px]="content.width" [style.height.px]="content.height"
                                                src="./assets/{{content.src}}" />
                                            <p *ngIf="content.type==3" id="{{content.id}}"
                                                (click)="selectElement('b',content.id)" class="position-absolute"
                                                (mouseup)="detectRightClick($event,'b',content.id)"
                                                [ngClass]="selectedElementId==content.id?'bordering':''"
                                                [style.marginLeft.px]="content.left" [style.marginTop.px]="content.top"
                                                [style.fontSize.px]="content.fontSize"
                                                [style.fontWeight]="content.bold?'bold':'normal'"
                                                [style.fontStyle]="content.italic?'italic':'normal'"
                                                [style.textDecoration]="content.underline?'underline':'none'"
                                                [style.fontFamily]="content.fontFamily?fonts[content.fontFamily-1]:''"
                                                [style.color]="content.fontColor">
                                                {{content.text}}
                                            </p>
                                        </ng-container>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between" [style.width.px]="itemWidth">
                                    <button class="btn btn-primary mt-3" (click)="downloadJpg('b')"
                                        [style.width.px]="itemWidth/2-5"><i class="fas fa-download  mr-4"></i>Download
                                        JPEG</button>
                                    <button class="btn btn-danger mt-3" (click)="downloadSvg('b')"
                                        [style.width.px]="itemWidth/2-5"><i class="fas fa-download  mr-4"></i>Download
                                        SVG</button>
                                </div>
                            </div>
                        </ng-template>
                    </li>
                    <!-- End Bak side of Visiting card -->
                </ul>
            </div>
            <div [ngbNavOutlet]="nav"></div>
        </div>
    </div>
</div>

<!-- New RightClickPanel-->
<div class="right-container" [style.display]="showRightClickPanel" [style.top.px]=rightClickPanelY
    [style.left.px]=rightClickPanelX>
    <p class="context-sub-menu-top">Delete</p>
    <ul class="context-menu">
        <li class="context-menu-item"><span class="context-menu-item-text">Text</span></li>
        <li class="context-menu-item"><span class="context-menu-item-text">Copy</span></li>
        <li class="context-menu-item"><span class="context-menu-item-text">Send to Back</span></li>
        <li class="context-menu-item"><span class="context-menu-item-text">Bring to Front</span></li>
    </ul>
    <p class="context-sub-menu-bottom" (click)="closeContextMenu()">Paste</p>
</div>
<!-- End RightClickPanel -->